#!/bin/bash
echo "üß™ Running test..."

if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win32" || "$(uname -s | grep -i mingw)" ]]; then
  export SBT_OPTS="-Djline.terminal=none"
  # On Windows: call PowerShell version
  powershell.exe -NoProfile -Command "sbt test"
else
  # On macOS/Linux
  sbt test
fi

if [ $? -ne 0 ]; then
  echo "‚ùå Test failed. Your push has been blocked."
  exit 1
else
  echo "‚úÖ Test passed!"
  exit 0
fi
